{"version":3,"sources":["components/Teapot/index.jsx","components/Slider/index.jsx","components/DeleteButton/index.jsx","components/EditableTable/index.jsx","reducers/teaTableReducer.js","components/TeaSelect/index.jsx","components/AddButton/index.jsx","utils/localStorageUtils.js","App.js","reportWebVitals.js","index.js"],"names":["Wrapper","styled","div","TeapotIcon","TeapotWater","amount","max","ScaleWrapper","ScaleText","AmountWrapper","TeaLeafAmount","WaterAmount","Teapot","amountOfWater","amountOfTeaLeaf","onClick","onClickIcon","e","buttons","elementHeight","target","offsetHeight","yPos","clientY","changedTouches","offsetTop","rate","value","Math","round","onMouseMove","onTouchMove","parseInt","isNaN","input","Circle","Mark","DeleteButton","remainProps","StyledTable","table","TableHeader","th","align","TableHeaderRow","tr","StyledTd","td","DeleteTd","StyledInput","EditableTable","data","onDelete","dispatch","useDispatch","columns","map","column","label","id","sort","a","b","row","type","min","onChange","rowId","columnId","targetRowData","find","payload","initialState","tableData","teaTableReducer","state","action","newTableData","filter","newDataId","isFinite","waterAmount","teaLeafId","targetTableData","lastWaterAmount","StyledSelect","select","TeaSelect","teaList","leafName","leafAmount","tea","AddButton","LOCALSTORAGE_KEY","Root","TeapotWrapper","TableWrapper","StyledAddButton","Page","useState","setWaterAmount","setTeaLeafId","teaLeafAmount","setTeaLeafAmount","useSelector","useEffect","targetTeaLeaf","calcTeaLeafAmount","length","localStorage","setItem","JSON","stringify","getItem","parse","readFromLocalStorage","document","addEventListener","preventDefault","passive","App","store","createStore","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.87f52ac5.chunk.js","sourcesContent":["import { useState } from \"react\";\r\nimport styled from \"styled-components\";\r\n\r\nconst Wrapper = styled.div`\r\n  height: 60vw;\r\n  max-height: 300px;\r\n  display: flex;\r\n  align-items: center;\r\n`;\r\n\r\nconst TeapotIcon = styled.div`\r\n  width: 40vw;\r\n  max-width: 200px;\r\n  height: 100%;\r\n  border-radius: 5px 5px 20px 20px;\r\n  border: 4px solid black;\r\n  border-top: none;\r\n  display: flex;\r\n  align-items: flex-end;\r\n  justify-content: center;\r\n`;\r\n\r\nconst TeapotWater = styled.div`\r\n  width: 100%;\r\n  background: rgba(112, 241, 255, 0.5);\r\n  border-radius: 1px 1px 15px 15px;\r\n  height: ${({amount, max}) => (amount/max)*100}%;\r\n  z-index: -1;\r\n  // transition: height 0.2s;\r\n`;\r\n\r\nconst ScaleWrapper = styled.div`\r\n  height: 110%;\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: end;\r\n  justify-content: space-between;\r\n`;\r\n\r\nconst ScaleText = styled.div`\r\n  position: relative;\r\n  font-weight: bold;\r\n  white-space: pre-wrap;\r\n`;\r\n\r\nconst AmountWrapper = styled.div`\r\n  display: flex;\r\n  height: 60vw;\r\n  max-height: 300px;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  justify-content: center;\r\n  z-index: -2;\r\n  position: absolute;\r\n`;\r\n\r\nconst TeaLeafAmount = styled.div`\r\n  font-weight: bold;\r\n  font-size 36px;\r\n  margin-bottom: 8px;\r\n`;\r\n\r\nconst WaterAmount = styled.div`\r\n  font-weight: bold;\r\n  font-size 36px;\r\n  border-top: 4px solid black;\r\n`;\r\n\r\nconst Teapot = ({\r\n  max,\r\n  amountOfWater,\r\n  amountOfTeaLeaf,\r\n  onClick,\r\n}) => {\r\n  const onClickIcon = (e) => {\r\n    // console.log(e);\r\n    if (e.buttons === 0) {\r\n      return;\r\n    }\r\n    const elementHeight = e.target.offsetHeight;\r\n    const yPos = (e.clientY || e.changedTouches[0].clientY) - e.target.offsetTop;\r\n    if (yPos <= 4) {\r\n      onClick(max);\r\n    } else if (yPos >= elementHeight - 4) {\r\n      onClick(0);\r\n    } else {\r\n      const rate = 1 - (yPos / elementHeight);\r\n      const value = Math.round((rate * max) / 10) * 10;\r\n      onClick(value);\r\n    }\r\n  }\r\n\r\n  return (\r\n    <Wrapper>\r\n      <TeapotIcon onMouseMove={onClickIcon} onTouchMove={onClickIcon}>\r\n        <TeapotWater max={parseInt(max)} amount={parseInt(amountOfWater)} />\r\n        <AmountWrapper>\r\n          <TeaLeafAmount>{isNaN(amountOfTeaLeaf) || !amountOfTeaLeaf ? ' - ' : Math.round(amountOfTeaLeaf)}g</TeaLeafAmount>\r\n          <WaterAmount>{amountOfWater}mL</WaterAmount>\r\n        </AmountWrapper>\r\n      </TeapotIcon>\r\n      <ScaleWrapper>\r\n          <ScaleText>{max||100}</ScaleText>\r\n          <ScaleText>{(max||100)/4*3}</ScaleText>\r\n          <ScaleText>{(max||100)/2}</ScaleText>\r\n          <ScaleText>{(max||100)/4*1}</ScaleText>\r\n          <ScaleText> 0</ScaleText>\r\n        </ScaleWrapper>\r\n    </Wrapper>\r\n  );\r\n};\r\n\r\nexport default Teapot;","import styled from \"styled-components\";\r\n\r\nconst Wrapper = styled.div`\r\n  display: flex;\r\n  margin-left: -30px;\r\n  align-items: center;\r\n`;\r\n\r\nconst SliderInput = styled.input`\r\n  transform: rotate(-90deg) scale(2);\r\n  width: 30vw;\r\n  max-width: 150px;\r\n`;\r\n\r\nconst Slider = ({\r\n  min = 0,\r\n  max = 100,\r\n  step = 10,\r\n  value,\r\n  setValue = () => null,\r\n}) => {\r\n  const onChange = (e) => {\r\n    setValue(e.target.value);\r\n  }\r\n  return (\r\n    <Wrapper>\r\n      <SliderInput\r\n        type=\"range\"\r\n        min={min}\r\n        max={max||100}\r\n        value={value}\r\n        step={step}\r\n        onChange={onChange}\r\n      />\r\n    </Wrapper>\r\n  );\r\n};\r\n\r\nexport default Slider;","import styled from \"styled-components\";\r\n\r\nconst Circle = styled.div`\r\n  width: 24px;\r\n  height: 24px;\r\n  border-radius: 100px;\r\n  :hover {\r\n    background: #ff0f0f;\r\n    div {\r\n      color: white;\r\n    }\r\n  }\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n\r\n`;\r\n\r\nconst Mark = styled.div`\r\n  font-size: 20px;\r\n`;\r\n\r\nconst DeleteButton = ({...remainProps}) => {\r\n  return (\r\n    <Circle {...remainProps}>\r\n      <Mark>🗑</Mark>\r\n    </Circle>\r\n  );\r\n};\r\n\r\nexport default DeleteButton;","import { useDispatch } from \"react-redux\";\r\nimport styled from \"styled-components\";\r\nimport DeleteButton from \"../DeleteButton\";\r\n\r\nconst StyledTable = styled.table`\r\n  border-collapse: collapse;\r\n  border-spacing: 0;\r\n`;\r\n\r\nconst TableHeader = styled.th`\r\n  text-align: ${({align}) => (align || 'start')};\r\n  padding: 0 16px;\r\n`;\r\n\r\nconst TableHeaderRow = styled.tr`\r\n  background: #a0a0a0;\r\n`;\r\n\r\nconst StyledTd = styled.td`\r\n  border-bottom 1px solid #a0a0a0;\r\n  padding: 0 8px;\r\n`;\r\n\r\nconst DeleteTd = styled.td`\r\n  border-bottom 1px solid #a0a0a0;\r\n  padding: 0 8px 0 16px;\r\n`;\r\n\r\nconst StyledInput = styled.input`\r\n  border: none;\r\n  text-align: ${({align}) => (align || 'start')};\r\n  width: 100%;\r\n`;\r\n\r\nconst EditableTable = ({ data, onDelete }) => {\r\n  const dispatch = useDispatch();\r\n\r\n  const onChange = ({\r\n    rowId,\r\n    columnId,\r\n    value,\r\n  }) => {\r\n    const targetRowData = data.data.find(({id}) => id === rowId);\r\n    dispatch({\r\n      type: 'UPDATE_DATA',\r\n      payload: {\r\n        data: {\r\n          ...targetRowData,\r\n          id: rowId,\r\n          [columnId]: value,\r\n        }\r\n      }\r\n    });\r\n  }\r\n\r\n  if (!data || !data.columns) {\r\n    return null;\r\n  }\r\n  return (\r\n    <StyledTable>\r\n      <thead>\r\n        <TableHeaderRow>\r\n          {data.columns.map((column) => (\r\n            <TableHeader key={column.id} align={column.align}>{column.label}</TableHeader>\r\n          ))}\r\n          <th></th>\r\n        </TableHeaderRow>\r\n      </thead>\r\n      <tbody>\r\n        {data.data.sort((a, b) => a.id - b.id).map((row) => (\r\n          <tr key={row.id}>\r\n            {data.columns.map((column) => (\r\n              <StyledTd\r\n                key={column.id}\r\n                align={column.align}\r\n              >\r\n                <StyledInput\r\n                  value={row[column.id]}\r\n                  align={column.align}\r\n                  type={column.type || 'text'}\r\n                  min={1}\r\n                  onChange={(e) => onChange({\r\n                    rowId: row.id,\r\n                    columnId: column.id,\r\n                    value: e.target.value,\r\n                  })}\r\n                />\r\n              </StyledTd>\r\n            ))}\r\n            <DeleteTd>\r\n              <DeleteButton onClick={() => onDelete(row.id)} />\r\n            </DeleteTd>\r\n          </tr> \r\n        ))}\r\n      </tbody>\r\n    </StyledTable>\r\n  );\r\n};\r\n\r\nexport default EditableTable;","const initialState = {\r\n  tableData: {\r\n    columns: [],\r\n    data: [],\r\n  }\r\n};\r\n\r\nconst teaTableReducer = (state = initialState, action) => {\r\n  switch (action.type) {\r\n    case 'INIT': {\r\n      return {\r\n        ...state,\r\n        tableData: {\r\n          ...action.payload,\r\n        },\r\n      };\r\n    }\r\n    case 'UPDATE_DATA': {\r\n      const { data } = action.payload;\r\n      const newTableData = state.tableData.data.filter(({ id }) => id !== data.id);\r\n      return {\r\n        ...state,\r\n        tableData: {\r\n          columns: state.tableData.columns,\r\n          data: [\r\n            ...newTableData,\r\n            data,\r\n          ],\r\n        },\r\n      };\r\n    }\r\n    case 'ADD_DATA': {\r\n      const { data } = action.payload;\r\n      let newDataId = Math.max(...state.tableData.data.map(({ id }) => id)) + 1;\r\n      if (!isFinite(newDataId)) {\r\n        newDataId = 0;\r\n      }\r\n      return {\r\n        ...state,\r\n        tableData: {\r\n          ...state.tableData,\r\n          data: [\r\n            ...state.tableData.data,\r\n            {\r\n              ...data,\r\n              id: newDataId,\r\n            },\r\n          ],\r\n        }\r\n      }\r\n    };\r\n    case 'DELETE_DATA': {\r\n      const { rowId } = action.payload;\r\n      const newTableData = state.tableData.data.filter(({ id }) => id !== rowId);\r\n      return {\r\n        ...state,\r\n        tableData: {\r\n          columns: state.tableData.columns,\r\n          data: [\r\n            ...newTableData,\r\n          ],\r\n        },\r\n      };\r\n    }\r\n    case 'UPDATE_LAST_WATER_AMOUNT': {\r\n      const { waterAmount, teaLeafId } = action.payload;\r\n      const targetTableData = state.tableData.data.find(({ id }) => id == teaLeafId);\r\n      const newTableData = state.tableData.data.filter(({ id }) => id != teaLeafId);\r\n      return {\r\n        ...state,\r\n        tableData: {\r\n          columns: state.tableData.columns,\r\n          data: [\r\n            ...newTableData,\r\n            {\r\n              ...targetTableData,\r\n              lastWaterAmount: waterAmount,\r\n            },\r\n          ],\r\n        },\r\n      };\r\n    }\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nexport default teaTableReducer;","import styled from \"styled-components\";\r\n\r\nconst StyledSelect = styled.select`\r\n  border: 2px solid;\r\n`;\r\n\r\nconst TeaSelect = ({\r\n  teaList,\r\n  onChange,\r\n}) => {\r\n  return (\r\n    <StyledSelect onChange={onChange}>\r\n      {teaList.filter((row) => {\r\n        return row.leafName && row.leafAmount && row.waterAmount;\r\n      }).map((tea) => {\r\n        return <option key={tea.id} value={tea.id}>{tea.leafName}</option>\r\n      })}\r\n    </StyledSelect>\r\n  )\r\n};\r\n\r\nexport default TeaSelect;","import styled from \"styled-components\";\r\n\r\nconst Circle = styled.div`\r\n  width: 24px;\r\n  height: 24px;\r\n  border-radius: 100px;\r\n  border: 1px solid #a0a0a0;\r\n  :hover {\r\n    background: #ff3a00;\r\n    border: 1px solid #ff3a00;\r\n    div {\r\n      color: white;\r\n    }\r\n  }\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n`;\r\n\r\nconst Mark = styled.div`\r\n  font-size: 24px;\r\n`;\r\n\r\nconst AddButton = ({\r\n  ...remainProps\r\n}) => {\r\n  return (\r\n    <Circle {...remainProps}>\r\n      <Mark>＋</Mark>\r\n    </Circle>\r\n  )\r\n};\r\n\r\nexport default AddButton;","const LOCALSTORAGE_KEY = 'teaLeafSettings';\r\n\r\nexport const readFromLocalStorage = () => {\r\n  const data = localStorage.getItem(LOCALSTORAGE_KEY);\r\n  return JSON.parse(data);\r\n};\r\n\r\nexport const writeToLocalStorage = (data) => {\r\n  localStorage.setItem(LOCALSTORAGE_KEY, JSON.stringify(data));\r\n};","import './App.css';\nimport Teapot from './components/Teapot';\nimport Slider from './components/Slider';\nimport { useState } from 'react';\nimport { createStore } from 'redux'\nimport styled from 'styled-components';\nimport EditableTable from './components/EditableTable';\nimport teaTableReducer from './reducers/teaTableReducer';\nimport { Provider, useDispatch, useSelector } from 'react-redux';\nimport { useEffect } from 'react';\nimport TeaSelect from './components/TeaSelect';\nimport AddButton from './components/AddButton';\nimport { readFromLocalStorage, writeToLocalStorage } from './utils/localStorageUtils';\n\nconst Root = styled.div`\n  margin: 8px 16px;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n`;\n\nconst TeapotWrapper = styled.div`\n  display: flex;\n  margin-top: 16px;\n`;\n\nconst TableWrapper = styled.div`\n  max-width: 580px;\n`;\n\nconst StyledAddButton = styled(AddButton)`\n  margin: 0 8px 4px auto;\n`;\n\nconst App = () => {\n  const store = createStore(teaTableReducer);\n  return (\n    <Provider store={store}>\n      <Page />\n    </Provider>\n  );\n};\n\nconst Page = () => {\n  const max = 400;\n  const min = 0;\n  const [waterAmount, setWaterAmount] = useState(50);\n  const [teaLeafId, setTeaLeafId] = useState(null);\n  const [teaLeafAmount, setTeaLeafAmount] = useState(0);\n\n  const { tableData } = useSelector((state) => state);\n\n  const teaList = tableData.data.sort((a, b) => a.id - b.id);\n\n  const dispatch = useDispatch();\n\n  const calcTeaLeafAmount = () => {\n    const targetTeaLeaf = tableData.data.find(({ id }) => id == teaLeafId);\n    if (!targetTeaLeaf) {\n      return 0;\n    }\n    return (targetTeaLeaf.leafAmount / targetTeaLeaf.waterAmount) * waterAmount;\n  };\n\n  const addBlankRow = () => {\n    dispatch({\n      type: 'ADD_DATA',\n      payload: {\n        leafName: '',\n        leafAmount: 0,\n        waterAmount: 0,\n      }\n    });\n  };\n\n  const onDeleteRow = (rowId) => {\n    dispatch({\n      type: 'DELETE_DATA',\n      payload: {rowId},\n    });\n  };\n\n  useEffect(() => {\n    setTeaLeafAmount(calcTeaLeafAmount());\n  }, [waterAmount, teaLeafId, tableData]);\n\n  useEffect(() => {\n    if (teaList.length && !teaList.find(({id}) => id == teaLeafId)) {\n      setTeaLeafId(teaList[0].id);\n    } else {\n      if (!teaList.length)\n      setTeaLeafId(null);\n    }\n    if (tableData && tableData.data.length) {\n      writeToLocalStorage(tableData);\n    }\n  }, [tableData]);\n\n  useEffect(() => {\n    if (waterAmount && !isNaN(teaLeafId)) {\n      dispatch({\n        type: 'UPDATE_LAST_WATER_AMOUNT',\n        payload: { waterAmount, teaLeafId }\n      });\n    }\n  }, [waterAmount]);\n\n  useEffect(() => {\n    const target = tableData.data.find(({id}) => id == teaLeafId);\n    if (target && target.lastWaterAmount) {\n      setWaterAmount(target.lastWaterAmount);\n    }\n  }, [teaLeafId]);\n\n  useEffect(() => {\n    const data = readFromLocalStorage();\n    dispatch({\n      type: 'INIT',\n      payload: {\n        columns: [\n          { id: 'leafName', label: '茶葉', align: 'center' },\n          { id: 'leafAmount', label: '茶葉の量 [g]', align: 'right', type: 'number' },\n          { id: 'waterAmount', label: '水の量 [mL]', align: 'right', type: 'number' },\n        ],\n        data: data ? data.data : [],\n      },\n    })\n    document.addEventListener('touchmove', (e) => e.preventDefault(), { passive: false });\n  }, []);\n\n  return (\n    <Root>\n      <TeaSelect teaList={teaList} onChange={(e) => setTeaLeafId(e.target.value)} />\n      <TeapotWrapper>\n        <Teapot max={max} amountOfWater={waterAmount} amountOfTeaLeaf={teaLeafAmount} onClick={setWaterAmount} />\n      </TeapotWrapper>\n      <TableWrapper>\n        <StyledAddButton onClick={addBlankRow}>a</StyledAddButton>\n        <EditableTable data={tableData} onDelete={onDeleteRow} />\n      </TableWrapper>\n    </Root>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}